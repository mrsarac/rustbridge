# RustBridge Configuration
# Industrial Protocol Bridge - Modbus to MQTT/JSON Gateway

server:
  host: "0.0.0.0"
  port: 3000
  metrics_enabled: true

mqtt:
  host: "localhost"
  port: 1883
  client_id: "rustbridge"
  topic_prefix: "rustbridge"
  qos: 1
  # username: "user"
  # password: "secret"

devices:
  # Example: Modbus TCP device
  - id: "plc-demo"
    name: "Demo PLC"
    device_type: tcp
    connection:
      host: "localhost"
      port: 5020
      unit_id: 1
    poll_interval_ms: 1000
    registers:
      - name: "temperature"
        address: 0
        register_type: holding
        count: 1
        data_type: u16
        unit: "°C"
        scale: 0.1

      - name: "humidity"
        address: 1
        register_type: holding
        count: 1
        data_type: u16
        unit: "%"
        scale: 0.1

      - name: "pressure"
        address: 2
        register_type: holding
        count: 1
        data_type: u16
        unit: "bar"
        scale: 0.01

      - name: "motor_speed"
        address: 10
        register_type: holding
        count: 1
        data_type: u16
        unit: "RPM"

      - name: "valve_status"
        address: 100
        register_type: coil
        count: 1
        data_type: bool

  # Example: Modbus RTU device (Week 2)
  # - id: "sensor-rtu"
  #   name: "Temperature Sensor"
  #   device_type: rtu
  #   connection:
  #     port: "/dev/ttyUSB0"
  #     baud_rate: 9600
  #     data_bits: 8
  #     stop_bits: 1
  #     parity: "none"
  #     unit_id: 1
  #   poll_interval_ms: 2000
  #   registers:
  #     - name: "temp"
  #       address: 0
  #       register_type: input
  #       count: 1
  #       data_type: i16
  #       unit: "°C"
  #       scale: 0.1
